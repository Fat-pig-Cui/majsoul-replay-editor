# 占星之战模式

活动场对应 `mode_id` 是 47, 关键词是 `zhanxing`

## 规则说明

- 每局首次摸牌时, 一次性公开牌山中之后的3张牌, 称为备选牌
- 玩家正常摸牌或岭上摸牌时, 改为从备选牌中选择任意1张
- 未被玩家选择的备选牌将继续保留
- 备选牌对所有玩家一直公开
- 之后每次摸牌前, 按照通常对局流程, 从牌山补足备选牌至3张
- 牌山剩余3张及以下时, 不再补充备选牌, 且所有玩家不能开杠(仓库中可以)

* 第一巡未破坏地和条件, 从备选牌中选择任意1张后和牌, 地和成立
* 立直后未破坏一发条件, 从备选牌中选择任意1张后和牌, 一发自摸成立
* 岭上摸牌时, 从备选牌中选择任意1张后和牌, 岭上开花成立
* 占星之战中, 不能使用自动摸切功能

---

**由于该模式的牌谱过于难编辑, 所以不推荐使用该模式来自制牌谱**

## 函数特殊说明

### 摸牌

`mopai(seat, tile, index)`

与段位场相比多了个参数 `index`: 指在牌候选池中选择的牌位置, 没有该参数时默认选第一张牌

`[0]` 表示第一张牌, `[1]` 表示第二张牌, `[2]` 表示第三张牌

**注意: 为了区分 `index` 和 `seat` , 没有参数 `seat` 时, `index` 要表示为数组的形式,
如 `mopai([1])` 表示选择候选池中的第二张牌, 而不是 1 号玩家摸牌**

例子: `mopai(3, [2]);`

## 示例牌谱

- [demo01](demo01.js)

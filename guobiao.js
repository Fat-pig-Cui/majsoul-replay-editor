// 国标麻将番种
cfg.fan.fan.map_[8000] = {
    "id": 8000,
    "name_chs": "大四喜",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 88,
    "fan_fulu": 88,
    "show_index": 8000,
    "sound": "fan_dasixi",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8001] = {
    "id": 8001,
    "name_chs": "大三元",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 88,
    "fan_fulu": 88,
    "show_index": 8001,
    "sound": "fan_dasanyuan",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8002] = {
    "id": 8002,
    "name_chs": "绿一色",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 88,
    "fan_fulu": 88,
    "show_index": 8002,
    "sound": "fan_lvyise",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8003] = {
    "id": 8003,
    "name_chs": "九莲宝灯",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 88,
    "fan_fulu": 88,
    "show_index": 8003,
    "sound": "fan_jiulianbaodeng",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8004] = {
    "id": 8004,
    "name_chs": "四杠",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 88,
    "fan_fulu": 88,
    "show_index": 8004,
    "sound": "fan_sigangzi",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8005] = {
    "id": 8005,
    "name_chs": "连七对",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 88,
    "fan_fulu": 88,
    "show_index": 8005,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8006] = {
    "id": 8006,
    "name_chs": "十三幺",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 88,
    "fan_fulu": 88,
    "show_index": 8006,
    "sound": "fan_guoshiwushuang",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8007] = {
    "id": 8007,
    "name_chs": "清幺九",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 64,
    "fan_fulu": 64,
    "show_index": 8007,
    "sound": "fan_qinglaotou",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8008] = {
    "id": 8008,
    "name_chs": "小四喜",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 64,
    "fan_fulu": 64,
    "show_index": 8008,
    "sound": "fan_xiaosixi",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8009] = {
    "id": 8009,
    "name_chs": "小三元",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 64,
    "fan_fulu": 64,
    "show_index": 8009,
    "sound": "fan_xiaosanyuan",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8010] = {
    "id": 8010,
    "name_chs": "字一色",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 64,
    "fan_fulu": 64,
    "show_index": 8010,
    "sound": "fan_ziyise",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8011] = {
    "id": 8011,
    "name_chs": "四暗刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 64,
    "fan_fulu": 64,
    "show_index": 8011,
    "sound": "fan_sianke",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8012] = {
    "id": 8012,
    "name_chs": "一色双龙会",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 64,
    "fan_fulu": 64,
    "show_index": 8012,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8013] = {
    "id": 8013,
    "name_chs": "一色四同顺",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 32,
    "fan_fulu": 32,
    "show_index": 8013,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8014] = {
    "id": 8014,
    "name_chs": "111222333444",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 32,
    "fan_fulu": 32,
    "show_index": 8014,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8015] = {
    "id": 8015,
    "name_chs": "123345567789",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 32,
    "fan_fulu": 32,
    "show_index": 8015,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8016] = {
    "id": 8016,
    "name_chs": "三杠",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 32,
    "fan_fulu": 32,
    "show_index": 8016,
    "sound": "fan_sangangzi",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8017] = {
    "id": 8017,
    "name_chs": "混幺九",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 32,
    "fan_fulu": 32,
    "show_index": 8017,
    "sound": "fan_hunlaotou",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8018] = {
    "id": 8018,
    "name_chs": "七对",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 24,
    "fan_fulu": 24,
    "show_index": 8018,
    "sound": "fan_qiduizi",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8019] = {
    "id": 8019,
    "name_chs": "七星不顺",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 24,
    "fan_fulu": 24,
    "show_index": 8019,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8020] = {
    "id": 8020,
    "name_chs": "全双刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 24,
    "fan_fulu": 24,
    "show_index": 8020,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8021] = {
    "id": 8021,
    "name_chs": "清一色",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 24,
    "fan_fulu": 24,
    "show_index": 8021,
    "sound": "fan_qingyise",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8022] = {
    "id": 8022,
    "name_chs": "一色三同顺",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 24,
    "fan_fulu": 24,
    "show_index": 8022,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8023] = {
    "id": 8023,
    "name_chs": "111222333",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 24,
    "fan_fulu": 24,
    "show_index": 8023,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8024] = {
    "id": 8024,
    "name_chs": "全大",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 24,
    "fan_fulu": 24,
    "show_index": 8024,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8025] = {
    "id": 8025,
    "name_chs": "全中",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 24,
    "fan_fulu": 24,
    "show_index": 8025,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8026] = {
    "id": 8026,
    "name_chs": "全小",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 24,
    "fan_fulu": 24,
    "show_index": 8026,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8027] = {
    "id": 8027,
    "name_chs": "清龙",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 16,
    "fan_fulu": 16,
    "show_index": 8027,
    "sound": "fan_yiqitongguan",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8028] = {
    "id": 8028,
    "name_chs": "三色双龙会",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 16,
    "fan_fulu": 16,
    "show_index": 8028,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8029] = {
    "id": 8029,
    "name_chs": "123345567",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 16,
    "fan_fulu": 16,
    "show_index": 8029,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8030] = {
    "id": 8030,
    "name_chs": "全带五",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 16,
    "fan_fulu": 16,
    "show_index": 8030,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8031] = {
    "id": 8031,
    "name_chs": "三同刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 16,
    "fan_fulu": 16,
    "show_index": 8031,
    "sound": "fan_sansetongke",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8032] = {
    "id": 8032,
    "name_chs": "三暗刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 16,
    "fan_fulu": 16,
    "show_index": 8032,
    "sound": "fan_sananke",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8033] = {
    "id": 8033,
    "name_chs": "全不顺",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 12,
    "fan_fulu": 12,
    "show_index": 8033,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8034] = {
    "id": 8034,
    "name_chs": "混合龙",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 12,
    "fan_fulu": 12,
    "show_index": 8034,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8035] = {
    "id": 8035,
    "name_chs": "大五",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 12,
    "fan_fulu": 12,
    "show_index": 8035,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8036] = {
    "id": 8036,
    "name_chs": "小五",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 12,
    "fan_fulu": 12,
    "show_index": 8036,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8037] = {
    "id": 8037,
    "name_chs": "三风刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 12,
    "fan_fulu": 12,
    "show_index": 8037,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8038] = {
    "id": 8038,
    "name_chs": "花龙",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 8,
    "fan_fulu": 8,
    "show_index": 8038,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8039] = {
    "id": 8039,
    "name_chs": "对称牌",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 8,
    "fan_fulu": 8,
    "show_index": 8039,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8040] = {
    "id": 8040,
    "name_chs": "三色三同顺",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 8,
    "fan_fulu": 8,
    "show_index": 8040,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8041] = {
    "id": 8041,
    "name_chs": "111 222 333",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 8,
    "fan_fulu": 8,
    "show_index": 8041,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8042] = {
    "id": 8042,
    "name_chs": "无役和",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 8,
    "fan_fulu": 8,
    "show_index": 8042,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8043] = {
    "id": 8043,
    "name_chs": "海底摸月",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 8,
    "fan_fulu": 8,
    "show_index": 8043,
    "sound": "fan_haidi",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8044] = {
    "id": 8044,
    "name_chs": "海底捞月",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 8,
    "fan_fulu": 8,
    "show_index": 8044,
    "sound": "fan_hedi",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8045] = {
    "id": 8045,
    "name_chs": "杠上开花",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 8,
    "fan_fulu": 8,
    "show_index": 8045,
    "sound": "fan_lingshang",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8046] = {
    "id": 8046,
    "name_chs": "抢杠和",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 8,
    "fan_fulu": 8,
    "show_index": 8046,
    "sound": "fan_qianggang",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8047] = {
    "id": 8047,
    "name_chs": "碰碰和",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 6,
    "fan_fulu": 6,
    "show_index": 8047,
    "sound": "fan_duiduihu",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8048] = {
    "id": 8048,
    "name_chs": "混一色",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 6,
    "fan_fulu": 6,
    "show_index": 8048,
    "sound": "fan_hunyise",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8049] = {
    "id": 8049,
    "name_chs": "123 234 345",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 6,
    "fan_fulu": 6,
    "show_index": 8049,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8050] = {
    "id": 8050,
    "name_chs": "五门齐",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 6,
    "fan_fulu": 6,
    "show_index": 8050,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8051] = {
    "id": 8051,
    "name_chs": "十二落抬点和",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 6,
    "fan_fulu": 6,
    "show_index": 8051,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8052] = {
    "id": 8052,
    "name_chs": "双暗杠",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 6,
    "fan_fulu": 6,
    "show_index": 8052,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8053] = {
    "id": 8053,
    "name_chs": "双三元刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 6,
    "fan_fulu": 6,
    "show_index": 8053,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8054] = {
    "id": 8054,
    "name_chs": "全带幺",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 4,
    "fan_fulu": 4,
    "show_index": 8054,
    "sound": "fan_hunquandaiyaojiu",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8055] = {
    "id": 8055,
    "name_chs": "门前清自摸和",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 4,
    "fan_fulu": 4,
    "show_index": 8055,
    "sound": "fan_zimo",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8056] = {
    "id": 8056,
    "name_chs": "双大杠",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 4,
    "fan_fulu": 4,
    "show_index": 8056,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8057] = {
    "id": 8057,
    "name_chs": "和断牌",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 4,
    "fan_fulu": 4,
    "show_index": 8057,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8058] = {
    "id": 8058,
    "name_chs": "三元刻 白",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8058,
    "sound": "fan_bai",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8059] = {
    "id": 8059,
    "name_chs": "三元刻 发",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8059,
    "sound": "fan_fa",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8060] = {
    "id": 8060,
    "name_chs": "三元刻 中",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8060,
    "sound": "fan_zhong",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8061] = {
    "id": 8061,
    "name_chs": "场风刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8061,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8062] = {
    "id": 8062,
    "name_chs": "门风刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8062,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8063] = {
    "id": 8063,
    "name_chs": "门前清",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8063,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8064] = {
    "id": 8064,
    "name_chs": "平和",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8064,
    "sound": "fan_pinghu",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8065] = {
    "id": 8065,
    "name_chs": "四合一",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8065,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8066] = {
    "id": 8066,
    "name_chs": "双同刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8066,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8067] = {
    "id": 8067,
    "name_chs": "双暗刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8067,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8068] = {
    "id": 8068,
    "name_chs": "暗杠",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8068,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8069] = {
    "id": 8069,
    "name_chs": "断幺",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 2,
    "fan_fulu": 2,
    "show_index": 8069,
    "sound": "fan_duanyao",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8070] = {
    "id": 8070,
    "name_chs": "一杯口",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8070,
    "sound": "fan_yibeikou",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8071] = {
    "id": 8071,
    "name_chs": "二色同顺",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8071,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8072] = {
    "id": 8072,
    "name_chs": "连六",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8072,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8073] = {
    "id": 8073,
    "name_chs": "幺九副",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8073,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8074] = {
    "id": 8074,
    "name_chs": "幺九刻",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8074,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8075] = {
    "id": 8075,
    "name_chs": "大杠",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8075,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8076] = {
    "id": 8076,
    "name_chs": "无一门",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8076,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8077] = {
    "id": 8077,
    "name_chs": "无字",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8077,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8078] = {
    "id": 8078,
    "name_chs": "一二八九",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8078,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8079] = {
    "id": 8079,
    "name_chs": "一三七九",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8079,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8080] = {
    "id": 8080,
    "name_chs": "单钓将",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8080,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8081] = {
    "id": 8081,
    "name_chs": "自摸",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 1,
    "fan_fulu": 1,
    "show_index": 8081,
    "sound": "fan_zimo",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8082] = {
    "id": 8082,
    "name_chs": "大暗杠",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 6,
    "fan_fulu": 6,
    "show_index": 8082,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};

cfg.fan.fan.map_[8083] = {
    "id": 8083,
    "name_chs": "天和",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 8,
    "fan_fulu": 8,
    "show_index": 8083,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8084] = {
    "id": 8084,
    "name_chs": "地和",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 6,
    "fan_fulu": 6,
    "show_index": 8084,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};
cfg.fan.fan.map_[8085] = {
    "id": 8085,
    "name_chs": "人和",
    "name_chs_t": "",
    "name_jp": "",
    "name_en": "",
    "name_kr": "",
    "fan_menqing": 6,
    "fan_fulu": 6,
    "show_index": 8085,
    "sound": "",
    "show_range_1": 0,
    "show_range_2": "",
    "merge_id": 0
};


function hupai_guobiao(seat) {
    let lstaction = getlstaction(), zimo = false;
    if (lstaction.name === "RecordNewRound" || lstaction.name === "RecordChangeTile")
        playertiles[seat].sort(cmp);
    if (lstaction.name === "RecordDealTile" || lstaction.name === "RecordNewRound" || lstaction.name === "RecordChangeTile")
        zimo = true;
    else if (lstaction.name === "RecordDiscardTile")
        playertiles[seat].push(lstaction.data.tile);
    else if (lstaction.name === "RecordAnGangAddGang")
        playertiles[seat].push(lstaction.data.tiles);
    else if (lstaction.name === "RecordBaBei")
        playertiles[seat].push(lstaction.data.tile);
    let fangchong;
    if (!zimo)
        fangchong = lstaction.data.seat;

    let ming = [];
    for (let i = 0; i < fulu[seat].length; i++) {
        let tiles = fulu[seat][i].tile;
        if (fulu[seat][i].type === 0)
            ming.push("shunzi(" + tiles[0] + "," + tiles[1] + "," + tiles[2] + ")");
        else if (fulu[seat][i].type === 1)
            ming.push("kezi(" + tiles[0] + "," + tiles[1] + "," + tiles[2] + ")");
        else if (fulu[seat][i].type === 2)
            ming.push("minggang(" + tiles[0] + "," + tiles[1] + "," + tiles[2] + "," + tiles[3] + ")");
        else if (fulu[seat][i].type === 3)
            ming.push("angang(" + tiles[0] + "," + tiles[1] + "," + tiles[2] + "," + tiles[3] + ")");
    }
    let hand = [].concat(playertiles[seat]), hu_tile;
    hu_tile = hand[hand.length - 1];
    hand.length--;
    hand.sort(cmp);
    // ------------------------------
    let qinjia = seat === ju;
    // -------------------------------------------
    let points = calcfan_guobiao(playertiles[seat], seat, zimo, fangchong);
    let val = 0;
    for (let i = 0; i < points.fans.length; i++)
        val = val + points.fans[i].val;
    // -------------------------------------------
    let sudian = calcsudian_guobiao(points);
    let zhahu = false;
    if (calchupai(playertiles[seat]) === 0 || sudian < 800)
        zhahu = true;
    if (lstaction.name === "RecordAnGangAddGang" && lstaction.data.type === 3)
        zhahu = true;

    if (zhahu) { // 诈和, 错和赔三家各 24*100 点
        for (let i = 0; i < playercnt; i++) {
            if (i === seat)
                continue;
            delta_scores[i] += 2400;
            delta_scores[seat] -= 2400;
        }
        let ret = {
            'count': 0,
            'doras': [],
            'li_doras': [],
            'fans': [{'val': 1, 'id': 9000}],
            'fu': 25,
            'hand': hand,
            'hu_tile': hu_tile,
            'liqi': false,
            'ming': ming,
            'point_rong': 7200,
            'point_sum': 7200,
            'point_zimo_qin': 7200,
            'point_zimo_xian': 7200,
            'qinjia': qinjia,
            'seat': seat,
            'title_id': 0,
            'yiman': true,
            'zimo': zimo,
        }
        playertiles[seat].length--;
        return ret;
    } else if (zimo) {
        for (let i = 0; i < playercnt; i++) {
            if (i === seat)
                continue;
            delta_scores[i] -= sudian + 800;
            delta_scores[seat] += sudian + 800;
        }
    } else {
        delta_scores[fangchong] -= sudian + 800;
        delta_scores[seat] += sudian + 800;

        for (let i = 0; i < playercnt; i++) {
            if (i === seat || i === fangchong)
                continue;
            delta_scores[i] -= 800;
            delta_scores[seat] += 800;
        }
    }
    // ---------------------------------------------------
    let ret = {
        'count': val,
        'doras': [],
        'li_doras': [],
        'fans': points.fans,
        'fu': points.fu,
        'hand': hand,
        'hu_tile': hu_tile,
        'liqi': false,
        'ming': ming,
        'point_rong': sudian + 2400,
        'point_sum': delta_scores[seat],
        'point_zimo_qin': delta_scores[seat] / 3,
        'point_zimo_xian': delta_scores[seat] / 3,
        'qinjia': qinjia,
        'seat': seat,
        'title_id': 0,
        'yiman': points.yiman,
        'zimo': zimo,
    }
    playertiles[seat].length--;
    return ret;
}

function calcfan_guobiao(tiles, seat, zimo) {
    let lastile = tiles[tiles.length - 1], fulucnt = 0;
    let ret = {'yiman': false, 'fans': [], 'fu': 0};
    let cnt = [];
    for (let i = 0; i <= 36; i++)
        cnt[i] = 0;
    for (let i = 0; i < tiles.length; i++)
        cnt[tiletoint(tiles[i])]++;

    let partition = [];
    for (let i = 0; i < fulu[seat].length; i++) {
        if (fulu[seat][i].type !== 4)
            partition.push(fulu[seat][i]);
        if (fulu[seat][i].type !== 4 && fulu[seat][i].type !== 3)
            fulucnt++;
    }

    function updateret(x) {
        if (x !== undefined && calcsudian_guobiao(x, 1) > calcsudian_guobiao(ret, 1))
            ret = x;
    }

    function calc() {
        let cnt2 = [];
        for (let i = 0; i <= 36; i++)
            cnt2[i] = 0;
        let partitiontmp = [].concat(partition);
        for (let i = partitiontmp.length - 1; i >= 0; i--) {
            let tiles = partitiontmp[i].tile;
            // 新增 9 分类, 用于组合龙
            if (partitiontmp[i].type === 0 || partitiontmp[i].type === 5 || partitiontmp[i].type === 9)
                for (let j = 0; j <= 2; j++)
                    cnt2[tiletoint(tiles[j])]++;
            else if (partitiontmp[i].type === 1 || partitiontmp[i].type === 6)
                cnt2[tiletoint(tiles[0])] += 3;
            else if (partitiontmp[i].type === 2 || partitiontmp[i].type === 3)
                cnt2[tiletoint(tiles[0])] += 4;
            else if (partitiontmp[i].type === 7)
                cnt2[tiletoint(tiles[0])] += 2;
        }

        function calc0(tingpaifu) {
            function deletefan(ans, x) {
                let flag = false;
                for (let i = 0; i < ans.fans.length; i++) {
                    if (flag)
                        ans.fans[i - 1] = ans.fans[i];
                    if (ans.fans[i].id === x)
                        flag = true;
                }
                if (flag)
                    ans.fans.length = ans.fans.length - 1;
                return ans;
            }

            let lstaction = getlstaction();
            let menqing = fulucnt === 0;
            let ans = {'yiman': false, 'fans': [], 'fu': 0};
            // 0: 明顺    1: 明刻   2: 明杠   3: 暗杠
            // 4: 北宝    5: 暗顺   6: 暗刻   7: 对子
            let typecnt = [[]];
            // 刻子, 杠子, 暗刻, 顺子
            let kezi = [], gangzi = [], anke = [], shunzi = [];
            let kezi_num = 0, gangzi_num = 0, anke_num = 0, duizi_num = 0;
            let minggang_num = 0;
            let angang_num = 0;

            for (let i = 0; i <= 34; i++) {
                typecnt[i] = [0, 0, 0, 0, 0, 0, 0, 0, 0];
                anke[i] = gangzi[i] = kezi[i] = shunzi[i] = 0;
            }
            for (let i = 0; i < partitiontmp.length; i++) {
                let type = partitiontmp[i].type;
                switch (type) {
                    case 1:
                        kezi[tiletoint(partitiontmp[i].tile[0])]++;
                        break;
                    case 2:
                        kezi[tiletoint(partitiontmp[i].tile[0])]++;
                        gangzi[tiletoint(partitiontmp[i].tile[0])]++;
                        break;
                    case 3:
                        kezi[tiletoint(partitiontmp[i].tile[0])]++;
                        gangzi[tiletoint(partitiontmp[i].tile[0])]++;
                        anke[tiletoint(partitiontmp[i].tile[0])]++;
                        break;
                    case 6:
                        kezi[tiletoint(partitiontmp[i].tile[0])]++;
                        anke[tiletoint(partitiontmp[i].tile[0])]++;
                        break;
                    case 0:
                    case 5:
                        shunzi[(tiletoint(partitiontmp[i].tile[0]) + tiletoint(partitiontmp[i].tile[1]) + tiletoint(partitiontmp[i].tile[2])) / 3]++;
                        break;
                }
                if (type === 1 || type === 2 || type === 3 || type === 6 || type === 7)
                    typecnt[tiletoint(partitiontmp[i].tile[0])][type]++;
                if (type === 0 || type === 5)
                    typecnt[(tiletoint(partitiontmp[i].tile[0]) + tiletoint(partitiontmp[i].tile[1]) + tiletoint(partitiontmp[i].tile[2])) / 3][type]++;
            }
            let beikou = 0, santongshun = false, sanlianke = false;
            for (let i = 1; i <= 34; i++) {
                anke_num += anke[i];
                gangzi_num += gangzi[i];
                kezi_num += kezi[i];
                duizi_num += typecnt[i][7];
                minggang_num += typecnt[i][2];
                angang_num += typecnt[i][3];

                if (i >= 2 && i <= 8 || i >= 11 && i <= 17 || i >= 20 && i <= 26) {
                    if (kezi[i - 1] >= 1 && kezi[i] >= 1 && kezi[i + 1] >= 1)
                        sanlianke = true;
                }
                // 这里的杯口数量算上副露的, 最后在判断是否有效
                beikou += Math.floor(shunzi[i] / 2);

                if (shunzi[i] === 3)
                    santongshun = true;
            }

            if (partitiontmp.length === 7)
                duizi_num = 7;
            // --------------------------
            // --------------------------
            // --------------------------
            let flag_ziyise = true, flag_lvyise = true, flag_qinglaotou = true, flag_duanyao = true,
                flag_hunlaotou = true;
            for (let i = 1; i <= 34; i++) {
                if (i <= 27 && cnt2[i] > 0)
                    flag_ziyise = false; // 字一色
                if (i !== 20 && i !== 21 && i !== 22 && i !== 24 && i !== 26 && i !== 33 && cnt2[i] > 0)
                    flag_lvyise = false; // 绿一色
                if (i !== 1 && i !== 9 && i !== 10 && i !== 18 && i !== 19 && i !== 27 && cnt2[i] > 0)
                    flag_qinglaotou = false; // 清老头
                if ((i === 1 || i === 9 || i === 10 || i === 18 || i === 19 || i === 27 || i >= 28 && i <= 34) && cnt2[i] > 0)
                    flag_duanyao = false; // 断幺九
                if ((i >= 2 && i <= 8 || i >= 11 && i <= 17 || i >= 20 && i <= 26) && cnt2[i] > 0)
                    flag_hunlaotou = false; // 混老头
            }
            // ---------------------------------
            let wumenqi = true;
            if (cnt2[1] + cnt2[2] + cnt2[3] + cnt2[4] + cnt2[5] + cnt2[6] + cnt2[7] + cnt2[8] + cnt2[9] === 0)
                wumenqi = false;
            if (cnt2[10] + cnt2[11] + cnt2[12] + cnt2[13] + cnt2[14] + cnt2[15] + cnt2[16] + cnt2[17] + cnt2[18] === 0)
                wumenqi = false;
            if (cnt2[19] + cnt2[20] + cnt2[21] + cnt2[22] + cnt2[23] + cnt2[24] + cnt2[25] + cnt2[26] + cnt2[27] === 0)
                wumenqi = false;
            if (cnt2[28] + cnt2[29] + cnt2[30] + cnt2[31] === 0)
                wumenqi = false;
            if (cnt2[32] + cnt2[33] + cnt2[34] === 0)
                wumenqi = false;
            // ---------------------------------
            let jiulian = false, jiulian_tile = "", yiqi = false, hunyise = false, qingyise = false;
            let jlbd = [0, 3, 1, 1, 1, 1, 1, 1, 1, 3];
            for (let k = 0; k <= 2; k++) {
                if (shunzi[k * 9 + 2] >= 1 && shunzi[k * 9 + 5] >= 1 && shunzi[k * 9 + 8] >= 1)
                    yiqi = true;

                jiulian = true;
                for (let i = 1; i <= 9; i++)
                    if (cnt2[k * 9 + i] < jlbd[i]) // 手牌中各种牌数量不满足
                        jiulian = false;
                if (jiulian) {
                    for (let i = 1; i <= 9; i++)
                        if (cnt2[k * 9 + i] > jlbd[i]) {
                            jiulian_tile = inttotile(k * 9 + i);
                            if (!equaltile(jiulian_tile, lastile))
                                jiulian = false;
                            break;
                        }
                    break;
                }
            }
            for (let i = 0; i <= 34; i++)
                if (gangzi[i] >= 1) // 九莲不允许有杠子
                    jiulian = false;
            // --------------------------
            for (let k = 0; k <= 3; k++) {
                hunyise = true;
                qingyise = true;
                for (let i = 1; i <= 34; i++) {
                    if (Math.floor((i - 1) / 9) !== k && cnt2[i] > 0)
                        qingyise = false;
                    if (Math.floor((i - 1) / 9) !== k && i <= 27 && cnt2[i] > 0)
                        hunyise = false;
                }
                if (hunyise)
                    break;
            }
            // --------------------------
            let santongke = false, shuangtongke = false;
            for (let i = 1; i <= 9; i++) {
                if (kezi[i] >= 1 && kezi[i + 9] >= 1 && kezi[i + 18] >= 1)
                    santongke = true;
                else if (kezi[i] >= 1 && kezi[i + 9] >= 1 || kezi[i] >= 1 && kezi[i + 18] >= 1 || kezi[i + 9] >= 1 && kezi[i + 18] >= 1)
                    shuangtongke = true;
            }
            // --------------------------
            let xiaosanyuan = false, xiaosixi = false;

            if (kezi[32] >= 1 && kezi[33] >= 1 && typecnt[34][7] === 1)
                xiaosanyuan = true;
            if (kezi[32] >= 1 && typecnt[33][7] === 1 && kezi[34] >= 1)
                xiaosanyuan = true;
            if (typecnt[32][7] === 1 && kezi[33] >= 1 && kezi[34] >= 1)
                xiaosanyuan = true;

            if (kezi[28] >= 1 && kezi[29] >= 1 && kezi[30] >= 1 && typecnt[31][7] === 1)
                xiaosixi = true;
            if (kezi[28] >= 1 && kezi[29] >= 1 && typecnt[30][7] === 1 && kezi[31] >= 1)
                xiaosixi = true;
            if (kezi[28] >= 1 && typecnt[29][7] === 1 && kezi[30] >= 1 && kezi[31] >= 1)
                xiaosixi = true;
            if (typecnt[28][7] === 1 && kezi[29] >= 1 && kezi[30] >= 1 && kezi[31] >= 1)
                xiaosixi = true;
            // --------------------------
            let hunquandai = true;
            for (let i = 1; i <= 34; i++) {
                // 从顺子和(刻子, 雀头)的角度判断是否有全带, 先顺子后(刻子, 雀头)
                if (i !== 2 && i !== 8 && i !== 11 && i !== 17 && i !== 20 && i !== 26 && shunzi[i] >= 1)
                    hunquandai = false;
                if (i !== 1 && i !== 9 && i !== 10 && i !== 18 && i !== 19 && i !== 27 && i < 28 && kezi[i] + typecnt[i][7] >= 1)
                    hunquandai = false;

            }

            // --------------------------
            let pinghu = true;
            if (duizi_num === 7)
                pinghu = false;
            for (let i = 1; i <= 34; i++) {
                if (kezi[i] >= 1) // 有刻子
                    pinghu = false;
                if (typecnt[i][7] === 1 && i >= 28 && i <= 34) // 雀头是字牌
                    pinghu = false;
            }
            // --------------------------
            let sansetongshun = false, ersetongshun_num = 0;
            for (let i = 2; i <= 8; i++) {
                if (shunzi[i] >= 1 && shunzi[i + 9] >= 1 && shunzi[i + 18] >= 1)
                    sansetongshun = true;
                if (shunzi[i] >= 1 && shunzi[i + 9] >= 1) {
                    if (shunzi[i] >= 2 && shunzi[i + 9] >= 2)
                        ersetongshun_num += 2;
                    else
                        ersetongshun_num++;
                } else if (shunzi[i] >= 1 && shunzi[i + 18] >= 1) {
                    if (shunzi[i] >= 2 && shunzi[i + 18] >= 2)
                        ersetongshun_num += 2;
                    else
                        ersetongshun_num++;
                } else if (shunzi[i + 9] >= 1 && shunzi[i + 18] >= 1) {
                    if (shunzi[i + 9] >= 2 && shunzi[i + 18] >= 2)
                        ersetongshun_num += 2;
                    else
                        ersetongshun_num++;
                }
            }
            // --------------------------
            // --------------------------
            // ---------------------------
            // 1 番
            if (beikou >= 1)
                ans.fans.push({'val': beikou, 'id': 8070}); // 一般高
            if (ersetongshun_num === 1 && !sansetongshun)
                ans.fans.push({'val': 1, 'id': 8071}); // 喜相逢
            if (ersetongshun_num === 2)
                ans.fans.push({'val': 2, 'id': 8071}); // 喜相逢
            let lianliu_num = 0;
            for (let j = 0; j <= 2; j++)
                for (let i = 2; i <= 5; i++)
                    if (shunzi[j * 9 + i] >= 1 && shunzi[j * 9 + i + 3] >= 1)
                        lianliu_num++;
            if (lianliu_num >= 1)
                ans.fans.push({'val': lianliu_num, 'id': 8072}); // 连六

            let laoshaofu_num = 0;
            for (let j = 0; j <= 2; j++)
                if (shunzi[j * 9 + 2] >= 1 && shunzi[j * 9 + 8] >= 1) {
                    if (shunzi[j * 9 + 2] >= 2 && shunzi[j * 9 + 8] >= 2)
                        laoshaofu_num += 2;
                    else
                        laoshaofu_num++;
                }
            if (laoshaofu_num >= 1)
                ans.fans.push({'val': laoshaofu_num, 'id': 8073}); // 老少副

            let yaojiuke_num = 0;
            yaojiuke_num += kezi[1] + kezi[9] + kezi[10] + kezi[18] + kezi[19] + kezi[27];
            yaojiuke_num += kezi[28] + kezi[29] + kezi[30] + kezi[31] + kezi[32] + kezi[33] + kezi[34];
            if (yaojiuke_num >= 1)
                ans.fans.push({'val': yaojiuke_num, 'id': 8074}); // 幺九刻

            if (minggang_num === 1)
                ans.fans.push({'val': 1, 'id': 8075}); // 明杠

            let queyimen = false;
            let havewanzi = false, havebingzi = true, havesuozi = true;
            for (let i = 0; i <= 9; i++) {
                if (cnt2[i] >= 1)
                    havewanzi = true;
                if (cnt2[i + 9] >= 1)
                    havebingzi = true;
                if (cnt2[i + 18] >= 1)
                    havesuozi = true;
            }
            if (havewanzi && havebingzi && !havesuozi)
                queyimen = true;
            if (havewanzi && !havebingzi && havesuozi)
                queyimen = true;
            if (!havewanzi && havebingzi && !havesuozi)
                queyimen = true;
            if (queyimen)
                ans.fans.push({'val': 1, 'id': 8076}); // 缺一门

            let wuzi = true;
            for (let i = 28; i <= 34; i++)
                if (cnt2[i] >= 1)
                    wuzi = false;
            if (wuzi)
                ans.fans.push({'val': 1, 'id': 8077}); // 无字

            let bianzhang = false;
            if ((tiletoint(lastile) - 1) % 9 + 1 === 3 && typecnt[tiletoint(lastile) - 1][5] >= 1)
                bianzhang = true;
            if ((tiletoint(lastile) - 1) % 9 + 1 === 7 && typecnt[tiletoint(lastile) + 1][5] >= 1)
                bianzhang = true;
            if (bianzhang) {
                cnt[tiletoint(lastile)]--;
                tiles.length--;
                if (tingpai(seat).length === 1) // 严格独听
                    ans.fans.push({'val': 1, 'id': 8078}); // 边张
                tiles.push(lastile);
                cnt[tiletoint(lastile)]++;
            }

            let kanzhang = typecnt[tiletoint(lastile)][5] >= 1;
            if (kanzhang && !bianzhang) {
                cnt[tiletoint(lastile)]--;
                tiles.length--;
                if (tingpai(seat).length === 1) // 严格独听
                    ans.fans.push({'val': 1, 'id': 8079}); // 坎张
                tiles.push(lastile);
                cnt[tiletoint(lastile)]++;
            }

            let dandiaojiang = true;
            let numtile = tiletoint(lastile);

            if (typecnt[numtile][7] !== 1)
                dandiaojiang = false;
            // 周围没有顺子
            if ((numtile - 1) % 9 + 1 === 1 && (shunzi[numtile + 1] >= 1 || shunzi[numtile + 2] >= 1))
                dandiaojiang = false;
            else if ((numtile - 1) % 9 + 1 === 2 && (shunzi[numtile + 1] >= 1 || shunzi[numtile + 2] >= 1))
                dandiaojiang = false;
            else if ((numtile - 1) % 9 + 1 === 3 && (shunzi[numtile + 1] >= 1 || shunzi[numtile + 2] >= 1))
                dandiaojiang = false;
            else if ((numtile - 1) % 9 + 1 === 7 && (shunzi[numtile - 2] >= 1 || shunzi[numtile - 1] >= 1))
                dandiaojiang = false;
            else if ((numtile - 1) % 9 + 1 === 8 && (shunzi[numtile - 2] >= 1 || shunzi[numtile - 1] >= 1))
                dandiaojiang = false;
            else if ((numtile - 1) % 9 + 1 === 9 && (shunzi[numtile - 2] >= 1 || shunzi[numtile - 1] >= 1))
                dandiaojiang = false;
            else if (shunzi[numtile - 2] >= 1 || shunzi[numtile - 1] >= 1 || shunzi[numtile + 1] >= 1 || shunzi[numtile + 2] >= 1)
                dandiaojiang = false;

            if (dandiaojiang && !kanzhang && !bianzhang) {
                cnt[tiletoint(lastile)]--;
                tiles.length--;
                if (tingpai(seat).length === 1) // 严格独听
                    ans.fans.push({'val': 1, 'id': 8080}); // 单钓将
                tiles.push(lastile);
                cnt[tiletoint(lastile)]++;
            }

            if (zimo)
                ans.fans.push({'val': 1, 'id': 8081}); // 自摸

            // ---------------------------
            // 2 番
            for (let i = 0; i < kezi[32]; i++) {
                for (let i = 0; i < ans.fans.length; i++)
                    if (ans.fans[i].id === 8074) { // 去除幺九刻
                        if (ans.fans[i].val >= 2)
                            ans.fans[i].val -= 1;
                        else
                            deletefan(ans, 8074);
                        break;
                    }
                ans.fans.push({'val': 2, 'id': 8058}); // 箭刻 白
            }
            for (let i = 0; i < kezi[33]; i++) {
                for (let i = 0; i < ans.fans.length; i++)
                    if (ans.fans[i].id === 8074) { // 去除幺九刻
                        if (ans.fans[i].val >= 2)
                            ans.fans[i].val -= 1;
                        else
                            deletefan(ans, 8074);
                        break;
                    }
                ans.fans.push({'val': 2, 'id': 8059}); // 箭刻 发
            }
            for (let i = 0; i < kezi[34]; i++) {
                // 这副刻子不计幺九刻
                for (let i = 0; i < ans.fans.length; i++)
                    if (ans.fans[i].id === 8074) { // 去除幺九刻
                        if (ans.fans[i].val >= 2)
                            ans.fans[i].val -= 1;
                        else
                            deletefan(ans, 8074);
                        break;
                    }
                ans.fans.push({'val': 2, 'id': 8060}); // 箭刻 中
            }

            for (let i = 0; i < kezi[tiletoint((chang + 1).toString() + "z")]; i++)
                ans.fans.push({'val': 2, 'id': 8061}); // 圈风刻
            for (let i = 0; i < kezi[tiletoint(((seat - ju + playercnt) % playercnt + 1).toString() + "z")]; i++)
                ans.fans.push({'val': 2, 'id': 8062}); // 门风刻

            if (menqing && !zimo)
                ans.fans.push({'val': 2, 'id': 8063}); // 门前清

            if (pinghu) {
                // 不计 无字
                deletefan(ans, 8077);
                ans.fans.push({'val': 2, 'id': 8064}); // 平和
            }

            let siguiyi_num = 0;
            for (let i = 1; i <= 34; i++)
                if (cnt2[i] === 4 && typecnt[i][2] === 0 && typecnt[i][3] === 0)
                    siguiyi_num++;
            if (siguiyi_num >= 1)
                ans.fans.push({'val': 2 * siguiyi_num, 'id': 8065}); // 四归一

            if (shuangtongke)
                ans.fans.push({'val': 2, 'id': 8066}); // 双同刻

            if (anke_num === 2)
                ans.fans.push({'val': 2, 'id': 8067}); // 双暗刻
            if (angang_num === 1)
                ans.fans.push({'val': 2, 'id': 8068}); // 暗杠
            if (flag_duanyao) {
                // 不计 无字
                deletefan(ans, 8077);
                ans.fans.push({'val': 2, 'id': 8069}); // 断幺
            }
            // ---------------------------
            // 4 番
            if (hunquandai)
                ans.fans.push({'val': 4, 'id': 8054}); // 全带幺
            if (menqing && zimo) {
                // 不计 自摸
                deletefan(ans, 8081);
                ans.fans.push({'val': 4, 'id': 8055}); // 不求人
            }

            if (minggang_num === 2)
                ans.fans.push({'val': 4, 'id': 8056}); // 双明杠

            let lastile_num = 0;
            for (let i = 0; i < playercnt; i++) {
                for (let j = 0; j < paihe[i].tiles.length; j++) // 查牌河
                    if (equaltile(lastile, paihe[i].tiles[j]))
                        lastile_num++;
                for (let j = 0; j < fulu[i].length; j++) // 查副露
                    for (let k = 0; k < fulu[i][j].tile.length; k++)
                        if (equaltile(lastile, fulu[i][j].tile[k]))
                            lastile_num++;
            }
            if (lastile_num === 4)
                ans.fans.push({'val': 4, 'id': 8057}); // 和绝张
            // ---------------------------
            // 6 番
            if (kezi_num === 4)
                ans.fans.push({'val': 6, 'id': 8047}); // 碰碰和
            if (hunyise && !qingyise)
                ans.fans.push({'val': 6, 'id': 8048}); // 混一色
            let sansesanbugao = false;
            for (let i = 2; i <= 8; i++) {
                if (i <= 6 && shunzi[i] >= 1 && shunzi[i + 9 + 1] >= 1 && shunzi[i + 18 + 2] >= 1)
                    sansesanbugao = true;
                if (i <= 6 && shunzi[i] >= 1 && shunzi[i + 9 + 2] >= 1 && shunzi[i + 18 + 1] >= 1)
                    sansesanbugao = true;
                if (i !== 2 && i !== 8 && shunzi[i] >= 1 && shunzi[i + 9 - 1] >= 1 && shunzi[i + 18 + 1] >= 1)
                    sansesanbugao = true;
                if (i !== 2 && i !== 8 && shunzi[i] >= 1 && shunzi[i + 9 + 1] >= 1 && shunzi[i + 18 - 1] >= 1)
                    sansesanbugao = true;
                if (i >= 4 && shunzi[i] >= 1 && shunzi[i + 9 - 2] >= 1 && shunzi[i + 18 - 1] >= 1)
                    sansesanbugao = true;
                if (i >= 4 && shunzi[i] >= 1 && shunzi[i + 9 - 1] >= 1 && shunzi[i + 18 - 2] >= 1)
                    sansesanbugao = true;
            }
            if (sansesanbugao)
                ans.fans.push({'val': 6, 'id': 8049}); // 三色三步高
            if (wumenqi)
                ans.fans.push({'val': 6, 'id': 8050}); // 五门齐
            let quanqiuren = true;
            if (zimo)
                quanqiuren = false;
            if (fulu[seat].length !== 4)
                quanqiuren = false;
            else
                for (let i = 0; i < 4; i++)
                    if (fulu[seat][i].type === 3)
                        quanqiuren = false;

            if (quanqiuren) {
                // 不计 单钓将
                deletefan(ans, 8080);
                ans.fans.push({'val': 6, 'id': 8051}); // 全求人
            }
            if (angang_num === 2) {
                // 不计 双暗刻
                deletefan(ans, 8067);
                ans.fans.push({'val': 6, 'id': 8052}); // 双暗杠
            }

            let shuangjianke = false;
            if (kezi[32] >= 1 && kezi[33] >= 1)
                shuangjianke = true;
            if (kezi[32] >= 1 && kezi[34] >= 1)
                shuangjianke = true;
            if (kezi[33] >= 1 && kezi[34] >= 1)
                shuangjianke = true;
            if (shuangjianke) {
                // 不计箭刻, 组成双箭刻的两副刻子不计幺九刻
                deletefan(ans, 8058);
                deletefan(ans, 8059);
                deletefan(ans, 8060);
                ans.fans.push({'val': 6, 'id': 8053}); // 双箭刻
            }

            // ---------------------------
            // 8 番, 无番和放到最后
            let hualong = false;
            if (shunzi[2] >= 1 && shunzi[14] >= 1 && shunzi[26] >= 1)
                hualong = true;
            if (shunzi[2] >= 1 && shunzi[17] >= 1 && shunzi[23] >= 1)
                hualong = true;
            if (shunzi[5] >= 1 && shunzi[11] >= 1 && shunzi[26] >= 1)
                hualong = true;
            if (shunzi[5] >= 1 && shunzi[17] >= 1 && shunzi[20] >= 1)
                hualong = true;
            if (shunzi[8] >= 1 && shunzi[11] >= 1 && shunzi[23] >= 1)
                hualong = true;
            if (shunzi[8] >= 1 && shunzi[14] >= 1 && shunzi[20] >= 1)
                hualong = true;
            if (hualong) {
                // 和 喜相逢, 连六同时出现删除连六
                if (ersetongshun_num >= 1 && lianliu_num >= 1)
                    deletefan(ans, 8072);
                ans.fans.push({'val': 8, 'id': 8038}); // 花龙
            }

            let tuibudao = true;
            for (let i = 0; i <= 34; i++)
                if (i !== 10 && i !== 11 && i !== 12 && i !== 13 && i !== 14 && i !== 17 && i !== 18)
                    if (i !== 20 && i !== 22 && i !== 23 && i !== 24 && i !== 26 && i !== 27)
                        if (i !== 32 && cnt2[i] >= 1) {
                            tuibudao = false;
                            break;
                        }
            if (tuibudao) {
                // 不计 缺一门
                deletefan(ans, 8076);
                ans.fans.push({'val': 8, 'id': 8039}); // 推不倒
            }

            if (sansetongshun) {
                // 不计 喜相逢
                deletefan(ans, 8071);
                ans.fans.push({'val': 8, 'id': 8040}); // 三色三同顺
            }
            let sansesanjiegao = false;
            for (let i = 1; i <= 9; i++) {
                if (i <= 7 && kezi[i] >= 1 && kezi[i + 9 + 1] >= 1 && kezi[i + 18 + 2] >= 1)
                    sansesanjiegao = true;
                if (i <= 7 && kezi[i] >= 1 && kezi[i + 9 + 2] >= 1 && kezi[i + 18 + 1] >= 1)
                    sansesanjiegao = true;
                if (i !== 1 && i !== 9 && kezi[i] >= 1 && kezi[i + 9 - 1] >= 1 && kezi[i + 18 + 1] >= 1)
                    sansesanjiegao = true;
                if (i !== 1 && i !== 9 && kezi[i] >= 1 && kezi[i + 9 + 1] >= 1 && kezi[i + 18 - 1] >= 1)
                    sansesanjiegao = true;
                if (i >= 3 && kezi[i] >= 1 && kezi[i + 9 - 2] >= 1 && kezi[i + 18 - 1] >= 1)
                    sansesanjiegao = true;
                if (i >= 3 && kezi[i] >= 1 && kezi[i + 9 - 1] >= 1 && kezi[i + 18 - 2] >= 1)
                    sansesanjiegao = true;
            }
            if (sansesanjiegao)
                ans.fans.push({'val': 8, 'id': 8041}); // 三色三节高
            if (paishan.length === 0) {
                if (zimo)
                    ans.fans.push({'val': 8, 'id': 8043}); // 妙手回春
                else
                    ans.fans.push({'val': 8, 'id': 8044}); // 海底捞月
            }
            if (zimo && lstdrawtype === 0)
                ans.fans.push({'val': 8, 'id': 8045}); // 杠上开花
            if (lstaction.name === "RecordAnGangAddGang") {
                // 不计 和绝张
                deletefan(ans, 8057);
                ans.fans.push({'val': 8, 'id': 8046}); // 抢杠和
            }
            // ---------------------------
            // 12 番
            // 全不靠和组合龙放到最后
            let dayuwu = true, xiaoyuwu = true;
            for (let i = 1; i <= 27; i++) {
                if ((i - 1) % 9 + 1 >= 6 && (i - 1) % 9 + 1 <= 9 && cnt2[i] >= 1)
                    dayuwu = false;
                if ((i - 1) % 9 + 1 >= 1 && (i - 1) % 9 + 1 <= 4 && cnt2[i] >= 1)
                    xiaoyuwu = false;
            }
            for (let i = 28; i <= 34; i++)
                if (cnt2[i] >= 1) {
                    dayuwu = false;
                    xiaoyuwu = false;
                }
            if (dayuwu) {
                // 不计 无字
                deletefan(ans, 8077);
                ans.fans.push({'val': 12, 'id': 8035}); // 大于五
            }
            if (xiaoyuwu) {
                // 不计 无字
                deletefan(ans, 8077);
                ans.fans.push({'val': 12, 'id': 8036}); // 大于五
            }
            let sanfengke = false;
            if (kezi[28] >= 1 && kezi[29] >= 1 && kezi[30] >= 1)
                sanfengke = true;
            if (kezi[28] >= 1 && kezi[29] >= 1 && kezi[31] >= 1)
                sanfengke = true;
            if (kezi[28] >= 1 && kezi[30] >= 1 && kezi[31] >= 1)
                sanfengke = true;
            if (kezi[29] >= 1 && kezi[30] >= 1 && kezi[31] >= 1)
                sanfengke = true;
            if (sanfengke && !xiaosixi) {
                ans.fans.push({'val': 12, 'id': 8037}); // 三风刻
            }
            // ---------------------------
            // 16 番
            if (yiqi) {
                // 不计 连六, 老少副
                deletefan(ans, 8072);
                deletefan(ans, 8073);
                ans.fans.push({'val': 16, 'id': 8027}); // 清龙
            }
            let sanseshuanglonghui = false;
            if (shunzi[2] >= 1 && shunzi[8] >= 1 && shunzi[11] >= 1 && shunzi[17] >= 1 && typecnt[23][7] >= 1)
                sanseshuanglonghui = true;
            if (shunzi[2] >= 1 && shunzi[8] >= 1 && typecnt[14][7] >= 1 && shunzi[20] >= 1 && shunzi[26] >= 1)
                sanseshuanglonghui = true;
            if (typecnt[5][7] >= 1 && shunzi[11] >= 1 && shunzi[17] >= 1 && shunzi[20] >= 1 && shunzi[26] >= 1)
                sanseshuanglonghui = true;
            if (sanseshuanglonghui) {
                // 不计 喜相逢、老少副、无字、平和
                deletefan(ans, 8071);
                deletefan(ans, 8073);
                deletefan(ans, 8077);
                deletefan(ans, 8064);
                ans.fans.push({'val': 16, 'id': 8028}); // 三色双龙会
            }
            let sanbugao = false;
            for (let j = 0; j <= 2; j++) {
                for (let i = 2; i <= 6; i++)
                    if (shunzi[j * 9 + i] >= 1 && shunzi[j * 9 + i + 1] >= 1 && shunzi[j * 9 + i + 2] >= 1)
                        sanbugao = true;
                for (let i = 0; i <= 2; i++)
                    if (shunzi[j * 9 + 2 + i] >= 1 && shunzi[j * 9 + 4 + i] >= 1 && shunzi[j * 9 + 6 + i] >= 1)
                        sanbugao = true;
            }
            if (sanbugao && !sibugao)
                ans.fans.push({'val': 16, 'id': 8029}); // 一色三步高
            let quandaiwu = true;
            for (let i = 1; i <= 34; i++) {
                if (!(i >= 4 && i <= 6) && !(i >= 13 && i <= 15) && !(i >= 22 && i <= 24) && shunzi[i] >= 1)
                    quandaiwu = false;
                if (i !== 5 && i !== 14 && i !== 23) {
                    if (kezi[i] >= 1 || typecnt[i][7] >= 1)
                        quandaiwu = false;
                }
            }
            if (quandaiwu) {
                // 不计 断幺, 无字
                deletefan(ans, 8069);
                deletefan(ans, 8077);
                ans.fans.push({'val': 16, 'id': 8030}); // 全带五
            }

            if (santongke) {
                // 不计 双同刻
                deletefan(ans, 8066);
                ans.fans.push({'val': 16, 'id': 8031}); // 三同刻
            }
            if (anke_num === 3)
                ans.fans.push({'val': 16, 'id': 8032}); // 三暗刻
            // ---------------------------
            // 24 番
            // 七星不靠放到最后
            if (duizi_num === 7) {
                // 不计 不求人、门前清、单钓将
                deletefan(ans, 8055);
                deletefan(ans, 8063);
                deletefan(ans, 8080);
                ans.fans.push({'val': 24, 'id': 8018}); // 七对
            }
            let quanshuangke = true;
            for (let i = 1; i <= 34; i++)
                if (i !== 2 && i !== 4 && i !== 6 && i !== 8 && i !== 11 && i !== 13 && i !== 15 && i !== 17 && i !== 20 && i !== 22 && i !== 24 && i !== 26)
                    if (cnt2[i] >= 1)
                        quanshuangke = false;
            if (duizi_num >= 2) // 不能是七对
                quanshuangke = false;
            if (quanshuangke) {
                // 不计 碰碰和、断幺、无字
                deletefan(ans, 8047);
                deletefan(ans, 8069);
                deletefan(ans, 8077);
                ans.fans.push({'val': 24, 'id': 8020}); // 全双刻
            }
            if (qingyise) {
                // 不计 无字
                deletefan(ans, 8077);
                ans.fans.push({'val': 24, 'id': 8021}); // 清一色
            }

            let sanjiegao = false;
            for (let j = 0; j <= 2; j++)
                for (let i = 1; i <= 7; i++)
                    if (kezi[j * 9 + i] >= 1 && kezi[j * 9 + i + 1] >= 1 && kezi[j * 9 + i + 2] >= 1)
                        sanjiegao = true;
            if (sanjiegao && !sijiegao) {
                // 不计一色三同顺
                // deletefan(ans, 8022);
                ans.fans.push({'val': 24, 'id': 8023}); // 一色三节高
            }

            if (santongshun) {
                // 不计 一色三节高、一般高
                deletefan(ans, 8023);
                deletefan(ans, 8070);
                ans.fans.push({'val': 24, 'id': 8022}); // 一色三同顺
            }

            let quanda = true, quanzhong = true, quanxiao = true;
            for (let i = 1; i <= 34; i++) {
                if (i !== 7 && i !== 8 && i !== 9 && i !== 16 && i !== 17 && i !== 18 && i !== 25 && i !== 26 && i !== 27)
                    if (cnt2[i] >= 1)
                        quanda = false;
                if (i !== 4 && i !== 5 && i !== 6 && i !== 13 && i !== 14 && i !== 15 && i !== 22 && i !== 23 && i !== 24)
                    if (cnt2[i] >= 1)
                        quanzhong = false;
                if (i !== 1 && i !== 2 && i !== 3 && i !== 10 && i !== 11 && i !== 12 && i !== 19 && i !== 20 && i !== 21)
                    if (cnt2[i] >= 1)
                        quanxiao = false;
            }
            if (quanda) {
                // 不计 无字
                deletefan(ans, 8077);
                ans.fans.push({'val': 24, 'id': 8024}); // 全大
            }
            if (quanzhong) {
                // 不计 断幺
                deletefan(ans, 8069);
                ans.fans.push({'val': 24, 'id': 8025}); // 全中
            }
            if (quanxiao) {
                // 不计 无字
                deletefan(ans, 8077);
                ans.fans.push({'val': 24, 'id': 8026}); // 全小
            }
            // ---------------------------
            // 32 番
            let sibugao = false;
            for (let i = 0; i <= 2; i++) {
                for (let j = 2; j <= 5; j++)
                    if (shunzi[i * 9 + j] >= 1 && shunzi[i * 9 + j + 1] >= 1 && shunzi[i * 9 + j + 2] >= 1 && shunzi[i * 9 + j + 3] >= 1)
                        sibugao = true;

                if (shunzi[i * 9 + 2] >= 1 && shunzi[i * 9 + 4] >= 1 && shunzi[i * 9 + 6] >= 1 && shunzi[i * 9 + 8] >= 1)
                    sibugao = true;
            }
            if (sibugao) {
                // 不计 一色三步高, 连六, 老少副
                deletefan(ans, 8029);
                deletefan(ans, 8072);
                deletefan(ans, 8073);
                ans.fans.push({'val': 32, 'id': 8015}); // 一色四步高
            }
            if (gangzi_num === 3)
                ans.fans.push({'val': 32, 'id': 8016}); // 三杠
            if (flag_hunlaotou && !flag_qinglaotou) {
                // 不计 碰碰和, 全带幺, 幺九刻
                deletefan(ans, 8047);
                deletefan(ans, 8054);
                deletefan(ans, 8074);
                ans.fans.push({'val': 32, 'id': 8017}); // 混幺九
            }
            // ---------------------------
            // 48 番
            let sitongshun = false, sijiegao = false;
            for (let i = 0; i <= 2; i++)
                for (let j = 1; j <= 9; j++) {
                    if (j !== 1 && j !== 9 && shunzi[i * 9 + j] >= 4)
                        sitongshun = true;
                    if (j <= 6 && kezi[i * 9 + j] >= 1 && kezi[i * 9 + j + 1] >= 1 && kezi[i * 9 + j + 2] >= 1 && kezi[i * 9 + j + 3] >= 1)
                        sijiegao = true;
                }
            if (sitongshun) {
                // 不计 一色三同顺, 一色三节高, 七对, 四归一, 一般高
                deletefan(ans, 8022);
                deletefan(ans, 8023);
                deletefan(ans, 8018);
                deletefan(ans, 8065);
                deletefan(ans, 8070);
                ans.fans.push({'val': 48, 'id': 8013}); // 一色四同顺
            }
            if (sijiegao) {
                // 不计 一色三同顺, 一色三节高, 碰碰和
                deletefan(ans, 8022);
                deletefan(ans, 8023);
                deletefan(ans, 8047);
                ans.fans.push({'val': 48, 'id': 8014}); // 一色四节高
            }
            // ---------------------------
            // 64 番
            if (flag_qinglaotou) {
                // 不计混幺九、碰碰和、全带幺、双同刻、幺九刻、无字
                deletefan(ans, 8017);
                deletefan(ans, 8047);
                deletefan(ans, 8054);
                deletefan(ans, 8066);
                deletefan(ans, 8074);
                deletefan(ans, 8077);
                ans.fans.push({'val': 64, 'id': 8007}); // 清幺九
            }
            if (xiaosixi) {
                // 不计 三风刻, 幺九刻
                deletefan(ans, 8037);
                deletefan(ans, 8074);
                ans.fans.push({'val': 64, 'id': 8008}); // 小四喜
            }
            if (xiaosanyuan) {
                // 不计 箭刻, 双箭刻, 组成小三元的两副刻子不计幺九刻
                deletefan(ans, 8058);
                deletefan(ans, 8059);
                deletefan(ans, 8060);
                deletefan(ans, 8053);
                ans.fans.push({'val': 64, 'id': 8009}); // 小三元
            }
            if (flag_ziyise) {
                // 不计 混幺九, 碰碰和, 全带幺, 幺九刻
                deletefan(ans, 8017);
                deletefan(ans, 8047);
                deletefan(ans, 8054);
                deletefan(ans, 8074);
                ans.fans.push({'val': 64, 'id': 8010}); // 字一色
            }
            if (anke_num === 4 && anke[tiletoint(lastile)] - gangzi[tiletoint(lastile)] >= 1) {
                // 不计 碰碰和, 不求人, 门前清
                deletefan(ans, 8047);
                deletefan(ans, 8055);
                deletefan(ans, 8063);
                ans.fans.push({'val': 64, 'id': 8011}); // 四暗刻
            }

            let shuanglonghui = false;
            for (let i = 0; i <= 2; i++) {
                if (cnt2[1 + i] >= 2 && cnt2[2 + i] >= 2 && cnt2[3 + i] >= 2)
                    if (cnt2[7 + i] >= 2 && cnt2[8 + i] >= 2 && cnt2[9 + i] >= 2)
                        if (cnt2[5 + i] >= 2) {
                            shuanglonghui = true;
                            break;
                        }
            }
            if (shuanglonghui) {
                // 不计 七对, 清一色, 平和, 一般高, 老少副, 无字
                deletefan(ans, 8018);
                deletefan(ans, 8021);
                deletefan(ans, 8064);
                deletefan(ans, 8070);
                deletefan(ans, 8073);
                deletefan(ans, 8077);
                ans.fans.push({'val': 64, 'id': 8012}); // 一色双龙会
            }

            // --------------------------
            // 88 番, 十三幺在 calcfan_guobiao 函数最后
            if (kezi[28] >= 1 && kezi[29] >= 1 && kezi[30] >= 1 && kezi[31] >= 1) {
                // 不计 三风刻, 碰碰和, 圈风刻, 门风刻, 幺九刻
                deletefan(ans, 8037);
                deletefan(ans, 8047);
                deletefan(ans, 8061);
                deletefan(ans, 8062);
                deletefan(ans, 8074);
                ans.fans.push({'val': 88, 'id': 8000}); // 大四喜
            }
            if (kezi[32] >= 1 && kezi[33] >= 1 && kezi[34] >= 1) {
                // 不计 双箭刻, 箭刻, 组成大三元的三副刻子不计幺九刻
                deletefan(ans, 8053);
                deletefan(ans, 8058);
                deletefan(ans, 8059);
                deletefan(ans, 8060);
                ans.fans.push({'val': 88, 'id': 8001}); // 大三元
            }
            if (flag_lvyise) {
                // 不计混一色。如无发，可计清一色
                deletefan(ans, 8048);
                ans.fans.push({'val': 88, 'id': 8002}); // 绿一色
            }
            if (jiulian) {
                // 不计 清一色, 不求人, 门前清, 无字, 一个幺九刻
                deletefan(ans, 8021);
                deletefan(ans, 8055);
                deletefan(ans, 8063);
                deletefan(ans, 8077);
                for (let i = 0; i < ans.fans.length; i++)
                    if (ans.fans[i].id === 8074) { // 去除一个幺九刻
                        if (ans.fans[i].val >= 2)
                            ans.fans[i].val -= 1;
                        else
                            deletefan(ans, 8074);
                        break;
                    }
                ans.fans.push({'val': 88, 'id': 8003}); // 九莲宝灯
            }// 国标中的九莲对标立直麻将中的纯九
            if (gangzi_num === 4) {
                // 不计 碰碰和, 单钓将
                deletefan(ans, 8047);
                deletefan(ans, 8080);
                ans.fans.push({'val': 88, 'id': 8004}); // 四杠
            }

            let lianqidui = false;
            for (let i = 0; i <= 2; i++)
                if (typecnt[3 + i * 9][7] >= 1 && typecnt[4 + i * 9][7] >= 1 && typecnt[5 + i * 9][7] >= 1 && typecnt[6 + i * 9][7] >= 1 && typecnt[7 + i * 9][7] >= 1) {
                    if (typecnt[1 + i * 9][7] >= 1 && typecnt[2 + i * 9][7] >= 1) {
                        lianqidui = true;
                        break;
                    }
                    if (typecnt[2 + i * 9][7] >= 1 && typecnt[8 + i * 9][7] >= 1) {
                        lianqidui = true;
                        break;
                    }
                    if (typecnt[8 + i * 9][7] >= 1 && typecnt[9 + i * 9][7] >= 1) {
                        lianqidui = true;
                        break;
                    }
                }
            if (lianqidui) {
                // 不计 清一色, 七对, 不求人, 门前清, 无字, 单钓将
                deletefan(ans, 8021);
                deletefan(ans, 8018);
                deletefan(ans, 8055);
                deletefan(ans, 8063);
                deletefan(ans, 8077);
                deletefan(ans, 8080);
                ans.fans.push({'val': 88, 'id': 8005}); // 连七对
            }

            // ---------------------------
            // ---------------------------
            // ---------------------------
            if (angang_num === 1 && gangzi_num === 2)
                ans.fans.push({'val': 5, 'id': 8082}); // 明暗杠
            // ---------------------------
            // 天地人和
            if (liqiinfo[seat].yifa !== 0 && liqiinfo[seat].liqi === 0 && seat === ju && zimo)
                ans.fans.push({'val': 8, 'id': 8083}); // 天和

            let first_tile = true;
            for (let i = 0; i < playercnt; i++) {
                if (i === ju)
                    continue;
                if (!(liqiinfo[i].yifa !== 0 && liqiinfo[i].liqi === 0))
                    first_tile = false;
            }
            if (first_tile && seat !== ju && !zimo)
                ans.fans.push({'val': 8, 'id': 8084}); // 地和

            // 在立直麻将中人和的基础上添加亲家的下一家没有一发(因为国标没有立直, 所以任何情况下切牌后都没有一发)
            if (liqiinfo[seat].yifa !== 0 && liqiinfo[seat].liqi === 0 && seat !== ju && zimo)
                ans.fans.push({'val': 8, 'id': 8085}); // 人和
            else if (liqiinfo[seat].yifa !== 0 && liqiinfo[seat].liqi === 0 && seat !== ju && !zimo && liqiinfo[(ju + 1) % playercnt].yifa === 0)
                ans.fans.push({'val': 8, 'id': 8085}); // 人和
            // ---------------------------
            // ---------------------------
            // ---------------------------
            // 无番和
            if (ans.fans.length === 0)
                ans.fans.push({'val': 8, 'id': 8042}); // 无番和
            // ---------------------------
            // ---------------------------
            // ---------------------------
            // ---------------------------
            // ---------------------------
            if (duizi_num === 7) { // 七对子固定符数
                ans.fu = 25;
                return ans;
            }
            ans.fu = 20; // 符底
            if (!pinghu)
                ans.fu += tingpaifu; // 听牌型符
            for (let i = 1; i <= 34; i++) {
                // 刻子符(幺九/中张, 明刻明杠, 暗杠暗刻)
                if (i === 1 || i === 9 || i === 10 || i === 18 || i === 19 || i === 27 || i >= 28 && i <= 34) {
                    ans.fu += typecnt[i][1] * 4;
                    ans.fu += typecnt[i][2] * 16;
                    ans.fu += typecnt[i][3] * 32;
                    ans.fu += typecnt[i][6] * 8;
                } else {
                    ans.fu += typecnt[i][1] * 2;
                    ans.fu += typecnt[i][2] * 8;
                    ans.fu += typecnt[i][3] * 16;
                    ans.fu += typecnt[i][6] * 4;
                }
                if (typecnt[i][7] === 1) {
                    // 雀头符, 雀头是自风, 场风, 三元
                    if (i === tiletoint(((seat - ju + playercnt) % playercnt + 1).toString() + "z"))
                        ans.fu += 2;
                    if (i === tiletoint((chang + 1).toString() + "z"))
                        ans.fu += 2;
                    if (i === 32 || i === 33 || i === 34)
                        ans.fu += 2;
                }
            }
            if (zimo && !pinghu)
                ans.fu += 2; // 自摸符
            if (!zimo && menqing)
                ans.fu += 10; // 门前清荣和符
            ans.fu =
                Math.ceil(ans.fu / 10) * 10;
            if (fulucnt !== 0 && ans.fu === 20)
                ans.fu = 30;
            // --------------------------------------------------
            return ans;
        }

        for (let i = partitiontmp.length - 1; i >= 0; i--) {
            let tile = partitiontmp[i].tile, type = partitiontmp[i].type;
            if (type === 5 && (equaltile(tile[0], lastile) || equaltile(tile[1], lastile) || equaltile(tile[2], lastile))) {
                if (!zimo)
                    partitiontmp[i].type = 0;
                let midtile = inttotile((tiletoint(tile[0]) + tiletoint(tile[1]) + tiletoint(tile[2])) / 3);
                if (equaltile(midtile, lastile))
                    updateret(calc0(2)); // 坎张听符
                else if (tiletoint(lastile) % 9 === 3 && tiletoint(midtile) % 9 === 2)
                    updateret(calc0(2)); // 边张听符
                else if (tiletoint(lastile) % 9 === 7 && tiletoint(midtile) % 9 === 8)
                    updateret(calc0(2)); // 边张听符
                else updateret(calc0(0));
                partitiontmp[i].type = 5;
            }
            if (type === 6 && equaltile(tile[0], lastile)) {
                if (!zimo) partitiontmp[i].type = 1;
                updateret(calc0(0));
                partitiontmp[i].type = 6;
            }
            if (type === 7 && equaltile(tile[0], lastile))
                updateret(calc0(2)); // 单骑符
        }
    }

    function dfs(now) {
        if (now === 35) {
            if (partition.length === 7 || partition.length === 5)
                calc();
            return;
        }
        if (cnt[now] === 0) {
            dfs(now + 1);
            return;
        }
        let whatever = [0, 2, 3];
        for (let k = 0; k < 3; k++) {
            if (cnt[now] < whatever[k])
                continue;
            cnt[now] -= whatever[k];
            let cnt0 = cnt[now];
            if (k === 1) {
                partition.push({'type': 7, 'tile': [inttotile(now), inttotile(now)]});
                dfs(now);
            } else if (k === 2)
                partition.push({'type': 6, 'tile': [inttotile(now), inttotile(now), inttotile(now)]});
            if (cnt[nxt2[now]] >= cnt0 && cnt[nxt2[nxt2[now]]] >= cnt0) {
                cnt[now] -= cnt0;
                cnt[nxt2[now]] -= cnt0;
                cnt[nxt2[nxt2[now]]] -= cnt0;
                for (let i = 1; i <= cnt0; i++)
                    partition.push({
                        'type': 5,
                        'tile': [inttotile(now), inttotile(nxt2[now]), inttotile(nxt2[nxt2[now]])]
                    });
                dfs(now + 1);
                cnt[now] += cnt0;
                cnt[nxt2[now]] += cnt0;
                cnt[nxt2[nxt2[now]]] += cnt0;
                for (let i = 1; i <= cnt0; i++) partition.length = partition.length - 1;
            }
            if (k === 1 || k === 2) partition.length = partition.length - 1;
            cnt[now] += whatever[k];
        }
    }

    dfs(1);
    for (let i = 0; i <= 36; i++)
        cnt[i] = 0;
    for (let i = 0; i < tiles.length; i++)
        cnt[tiletoint(tiles[i])]++;

    let result = calchupai(tiles);
    if (result === 3) {
        let ans = {'yiman': false, 'fans': [], 'fu': 0};
        // 国标麻将十三幺不能枪暗杠, 至于优先头跳, 这里没有实现
        // 至于会不会计门前清等其他番种, 萌娘百科上没有说明, 这里就不计了
        ans.fans.push({'val': 88, 'id': 8006}); // 十三幺
        updateret(ans);
    }
    if (result === 4 || result === 5) { // 一定是全不靠或七星不靠
        let qixingbukao = true;
        for (let i = 28; i <= 34; i++)
            if (cnt[i] === 0)
                qixingbukao = false;

        let ans = [];
        if (qixingbukao)
            ans.fans.push({'val': 24, 'id': 8019}); // 七星不靠
        else if (result === 5) { // 有组合龙
            ans.fans.push({'val': 12, 'id': 8033}); // 全不靠
            ans.fans.push({'val': 12, 'id': 8034}); // 组合龙
        } else
            ans.fans.push({'val': 12, 'id': 8033}); // 全不靠
        updateret(ans);
    }
    if (result >= 6 && result <= 11) { // 一般组合龙
        let condition = [
            [1, 4, 7, 11, 14, 17, 21, 24, 27],
            [1, 4, 7, 12, 15, 18, 20, 23, 26],
            [2, 5, 8, 10, 13, 16, 21, 24, 27],
            [2, 5, 8, 12, 15, 18, 19, 22, 25],
            [3, 6, 9, 10, 13, 16, 20, 23, 26],
            [3, 6, 9, 11, 14, 17, 19, 22, 25],
        ];
        for (let i = 0; i < 3; i++) {
            let new_shunzi = [inttotile(condition[result - 6][3 * i]), inttotile(condition[result - 6][3 * i + 1]), inttotile(condition[result - 6][3 * i + 2])];
            partition.push({'type': 9, 'tile': new_shunzi});
        }
        for (let i = 0; i < condition[result - 6].length; i++)
            tiles = deletetile(tiles, condition[result - 6][i]);
        dfs(1);
    }

    function deletetile(tiles, int) {
        for (let i = 0; i < tiles.length; i++)
            if (tiletoint(tiles[i]) === int) {
                let tmp = tiles[i];
                tiles[i] = tiles[tiles.length - 1];
                tiles[tiles.length - 1] = tmp;
                tiles.length--;
                return tiles;
            }
        return tiles;
    }

    return ret;
}

function calcsudian_guobiao(x, type = 0) {
    let val = 0;
    for (let i = 0; i < x.fans.length; i++)
        val = val + x.fans[i].val;
    return val * 100 + 0.1 * type;
}

# 编辑每个对局 (round)

## 起手

`tiles i` 表示 `seat` 为 i 的玩家的初始手牌

注意庄家起手是14张, 子家是13张

例子: 

```
tiles0 = ["1z", "1z", "1z", "2z", "2z", "2z", "3z", "3z", "3z", "4z", "4z", "4z", "7z", "7z"];
tiles1 = ["1m", "1m", "1m", "2m", "3m", "4m", "0m", "6m", "7m", "8m", "9m", "9m", "9m"];
tiles2 = ["1p", "1p", "1p", "2p", "3p", "4p", "0p", "6p", "7p", "8p", "9p", "9p", "9p"];  
tiles3 = ["1s", "1s", "1s", "2s", "3s", "4s", "0s", "6s", "7s", "8s", "9s", "9s", "9s"];
// 也支持简写, 为了方便编辑和阅读也推荐用下面这种方法
tiles0 = "11122233344477z";
tiles1 = "1112340678999m";
tiles2 = "1112340678999p";  
tiles3 = "1112340678999s";
```

如果为三人麻将, 请确保 `tiles3=[];`

## 牌山

例子: 

```
paishan = "3s4m1p7p7m8m1m3p1s1s5s9s8p9s2p7m2m8m4p3m6p4m3p1s1p5m2p2m5s7m0s3m4m6m8m6p0m4p7p1p8p3p1s1p2m3m7s3p7s9m2p8p4p6m9p6m9p7p7s8p6p4p6z9s9s7p9p6p7s5s2p5z6s3z4s2z0p7z8s1z2s4z5m";
```

为了方便, 代码提供了函数`randompaishan(paishan, paishanback, reddora)`

`paishan`: 牌山开始的部分

`paishanback`: 牌山结尾的部分。没有此参数时默认为`""`

`reddora`: 红宝牌数量。没有此参数时使用`config`设置

`paishan` 及 `paishanback` 还支持该位置任意的剩下牌或者幺九牌, 用 `.` 表示任意剩下一张牌, `Y` 表示一张幺九牌, `D` 表示一张中张牌,
`H` 表示一张字牌, `T` 表示一张老头牌

例子: 

```
paishan=randompaishan("3s", ""); // 以三索开头的牌山
paishan=randompaishan("3s3s3s3s", "1z"); // 以四个三索开头, 东风为结尾的牌山
paishan=randompaishan("3333s", "1z"); // 牌山也支持简写
paishan=randompaishan("", "1z...."); // (四麻)以东风作为宝牌指示牌的牌山
paishan=randompaishan("YYYY"); // 以四个幺九开头的牌山
```

此外, `randompaishan` 也会检查生成的牌山是否合规(数量能不能对得上), 对不上会在控制台报警告, 又涉及到了三个变量:

- `chang`: 取值 0-3, 分别代表 东, 南, 西, 北
- `ju`: 取值 0-3, 分别代表四个玩家 `seat` 为多少的坐庄, 比如东二局 `ju` 的值就是1
- `ben`: 本场数, 这个比较好理解, 连庄, 流局等非只有子家和牌的情况本场数会加一

如: 西二局3本场 `chang`, `ju`, `ben` 三个变量的值分别是 2, 1, 3. 北一局1本场三个变量的值分别是 3, 0, 1.

## 每个人的出牌(可选)

设置每个人的所有出牌（可选）

若修改该参数, 则之后调用函数 `qiepai()` 并且不给定参数 `tile` 时, 会优先按照所给切牌顺序切牌

例子: `discardtiles = ["", "7s5z", "3s", "2s"];`

## 对局的流程

每小局开始前, 要调用函数 `roundbegin();`

开始编辑每一局的过程, 所用的函数在[每一局所使用的函数（段位场部分）](每一局所使用的函数（段位场部分）.md)

活动场的话还可以参考[每一局所使用的函数（活动场部分）](每一局所使用的函数（活动场部分）.md)

每小局结束后调用函数 `roundend();` (这个在非修罗和赤羽模式可以省略)
